<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="jquery.js"></script>
    <script src="timeago.js"></script>
    <script src="moment.js"></script>
    <script src="data_generator.js"></script>
    <!--<script src="script.js"></script> -->
<script type="text/javascript">

var datetime = null,
        date = null;

var update = function () {
    date = moment(new Date())
    datetime = (date.fromNow());
};

 var result = [];


$(document).ready(function(){
  var $body = $('body');
  $body.html('');


    datetime = $('#datetime');
    update();
    setInterval(update, 1000);

        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div></div>');
          $tweet.text('@' + tweet.user + ': ' + tweet.message);
          $tweet.appendTo($body);
          index -= 1;
        }

        var displayNames = {
          shawn: "Shawn Drost",
          sharks: "Sharks FoR Cheap",
          marcus: "Marcus Raucus",
          doug: "Douglas Calhoun"
        };
        var name = "";
        var image = "";
        var time = moment().fromNow();

        function prependTweets(){
          
          var user = tweet.user
          switch(user){
            case 'shawndrost':
              user = "shawnyyboyyy"
              name = '<a href = "sharks.html" class = "displayNames">' + displayNames.shawn + '</a>'
              image = '<img src = shawn.jpg>'
              break;
            case 'sharksforcheap':
              name = '<a href = "sharks.html" class = "displayNames">' + displayNames.sharks + '</a>'
              user = "SharkzzzFoCheap"
              image = '<img src = shark.jpg>'
              break;
            case 'mracus':
              name =  '<a href = "sharks.html" class = "displayNames">' + displayNames.marcus + '</a>'
              user = "MarcusTheRaucus",
              image = '<img src = marcus.jpg>'
              break;  
            case 'douglascalhoun':
              name =  '<a href = "sharks.html" class = "displayNames">' + displayNames.doug + '</a>'
              user = "beardmau5"
              image = '<img src = beard.jpg>'
              break;                
          }
          //Variables for Users, Messages, and Dates //
          //$user.text('@' + user);
          var message = tweet.message
          var $message = $('<div class = "messages"></div>');
          $message.text(message);
          var created_at = tweet.created_at
          var $created_at = $('<div class = "dates"></div>');
          $created_at.text(created_at);

          index = streams.home.length - 1;
          tweet = streams.home[index]
          var $tweet = $('<div></div>');
          $tweet.text('@' + user + ': ' + message + created_at);
          //$tweet.appendTo($body);
          //console.log(streams.users);
          $body.prepend(  '<div class "group">' + image + 
                           '&nbsp' +
                          '<a href = "#" class = "displayNames">' + name + '&nbsp' + '</a>' +
                          '<p class = "userNames">' + '@' + user + '&nbsp' + '</p>' +
                          '<p class = "userNames"> Â· </p>' + '  ' + 
                          '<p class = "userNames">' + datetime + '</p>' + '<br/>' + '&nbsp' +
                          '<p class = "messages">' + message + '</p>' +
                          '</div>');

        }
        function timedRefresh(){
          setInterval(prependTweets, 5000)
        }
        timedRefresh();

      });


</script>
</head>
<body>
<div></div>



  </body>
</html>
